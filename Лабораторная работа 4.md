# Лабораторная работа №4
## Создание Angular проекта
Общий гайд по созданию ангуляр проекта доступен [здесь](https://angular.dev/tools/cli/setup-local#create-a-workspace-and-initial-application).

Ниже представлен вольный пересказ.
1. Скачайте и установите LTS версию [node.js](https://nodejs.org/en/download/)
2. Запустите терминал, установите [CLI Angular](https://angular.dev/tools/cli) командой `npm install -g @angular/cli`
3. Перейдите в терминале в директорию, в которой будет располагаться ваш проект.
4. Наберите команду `ng new имя-вашего-приложения`
   - Which stylesheet format would you like to use? - На ваш вкус. Базовым вариантом здесь будет CSS. Остальное примочки над ним, так что можно обойти стороной.
   - Do you want to enable Server-Side Rendering (SSR) and Static Site Generation (SSG/Prerendering)? N
6. Перейдите в созданную директорию. Запустить проект вы можете посредством команды `ng serve --open`. Ваше приложение будет доступно по адресу `http://localhost:4200/`
7. Если используйте VSCode, то установите [Angular Language Service](https://marketplace.visualstudio.com/items?itemName=Angular.ng-template). [Что это?](https://angular.io/guide/language-service)

В качестве серверной части возьмите вариант со 2 лр (3 л.р. с отключённой секьюрити).

На оф. сайте Ангуляра есть замечательный гайд по созданию приложения, который покроет все ваши нужды. 
https://angular.io/tutorial/tour-of-heroes

Добавьте какую-нибудь css библиотеку чтобы ваш сайт не выглядел вырвиглазно. Можно выбрать из [этого](https://github.com/troxler/awesome-css-frameworks) списка.

## Роутинг
Создайте следующие компоненты при помощи команды [ng cli](https://angular.io/cli/generate#component-command)
- `ProjectListComponent` - отображает список проектов.
- `EditProjectComponent` - форма редактирования/создания проектов.
- `TaskListComponent` - отображает список задач.

Добавьте в ваш проект [роутинг](https://angular.dev/guide/routing).
Должны быть представлены следующие адреса:
- `/projects` - выводит список всех проектов
- `/projects/{projectId}` - редактирование проекта projectId
- `/projects/new` - создание проекта
- `/tasks/{projectId}` - выводит все задачи проекта с id = projectId

Привяжите к этим адресам соответствующие компоненты.

## Создание Typescript интерфейсов
1. Создайте typescript тип, например с именем `Project`, который будет описывать Pojo/DTO сущность вашего проекта из второй лабораторной работы.
2. Создайте typescript тип, например с именем `Task`, который будет описывать Pojo/DTO сущность вашей задачи из второй лабораторной работы.

## Сервисы для взаимодействия с сервером
Для взаимодействия с сервером вам необходимо включить CORS на стороне сервера либо же настроить [proxy у ng cli](https://angular.dev/tools/cli/serve#proxying-to-a-backend-server)
1. Создайте environment файл с адресом вашего сервера. [Пример](https://angular.dev/tools/cli/environments#configure-environment-specific-defaults)
2. Создайте два Angular сервиса. ProjectService для работы с проектами и TaskService для работы с задачами. Примерный шаблон работы с HTTP можно посмотреть [здесь](https://angular.io/tutorial/tour-of-heroes/toh-pt6).
3. Реализуйте в сервисах методы для общения с вашим сервером.

## Создание отображения проекта
1. Создайте компонент, который будет отображать сводную информацию о проекте. В качестве входного параметра данный компонент принимает сущность проекта. Второй параметр - количество незакрытых задач.
   Примерный макет компонента:\
      ![image](https://github.com/Das-dasein/web-2024/assets/33377076/c24dad9a-9f4d-409d-8755-d6f3caf999b1)
2. Форматирование даты осуществите посредством [date pipe](https://angular.dev/guide/pipes/template#chaining-pipes).
3. При нажатии на кнопку редактирования (у меня это карандаш) пользователь должен быть перенаправлен на страницу редактирования (роут /projects/{projectId}). Для перехода на другую страницу воспользуйтесь директивой [routerLink](https://angular.io/api/router/RouterLink). 
4. Проверьте работоспособность вашего компонента, добавив его в разметку app.component.html (после отладки этот шаг можно убрать)

## Отображение списка проектов
1. Создайте компонент `ProjectListComponent`.
2. Список проектов загружается с сервера посредством http. Для этого воспользуйтесь ранее реализованным ProjectService. Также вам необходимо загрузить сведения о количестве незакрытых задач проекта. Для параллельной загрузки этих данных воспользуйтесь [forkJoin](https://tyapk.ru/blog/post/rxjs-angular-parallelnye-i-posledovatelnye-zaprosy).
3. Для отображения списка вам необходимо в шаблоне проитерироваться по проектам при помощи директивы [ngFor](https://angular.dev/guide/pipes/template#chaining-pipes) либо [@for block](https://angular.dev/api/core/@for#mat-tab-content-107-0) и передать соответствующие входные параметры
4. Добавьте [input](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/search) для осуществления фильтрации проектов по названию/описанию (как во 2 л.р., но только на JS). Фильтрация осуществляется [в момент нажатия клавиши Enter](https://angular.io/guide/user-input#key-event-filtering-with-keyenter).
5. Добавьте обработчик, в котором вы произведёте фильтрацию массива.
6. Добавьте кнопку Создания проекта. Данная кнопка должна перенаправлять на страницу /projects/new
7. Опционально: Добавьте отображение сообщения "Нет данных" на случай если массив оказался пустым.

## Создание/редактирование проектов
1. Создайте форму для редактирования/создания проектов. Поля данной формы:
-  `input type=text` для ввода имени проекта
-  `textarea` для ввода описания проекта
-  `input type=date` для ввода даты начала проекта
-  `input type=date` для ввода даты окончания проекта
Привязку полей формы к модели осуществите при помощи [Template Driven Form](https://angular.dev/guide/forms/template-driven-forms#naming-control-elements) либо [Reactive Form](https://angular.dev/guide/forms/reactive-forms)
Если страница открыта на редактирование, то идентификатор проекта придёт в url. Иначе же в url придёт new. Как получить значение параметра роута можно посмотреть [здесь](https://angular.io/guide/router#accessing-query-parameters-and-fragments).
Если открыто на редактирование, то вам необходимо загрузить проект с сервера посредством ProjectService.
2. Добавьте кнопку Сохранить. По её нажатию должен отправляться запрос на сохранение проекта. После успешного выполнения запроса пользователь должен быть перенаправлен на список проектов.
3. Опционально: Добавьте валидацию вводимых пользователем данных

## Отображение задач
1. Создайте компонент, отображающий задачу. Примерный макет компонента:\
![image](https://github.com/Das-dasein/web-2024/assets/33377076/ed8dc720-6042-4a12-a2d2-b4117018b63d)
2. В качестве входного параметра данный компонент принимает объект типа `Task`.\ Добавьте [`@Output`](https://angular.dev/guide/components/outputs) событие удаления задачи.

## Отображения списка задач
1. Реализуйте компонент `TaskListComponent`. Идентификатор проекта передаётся через url.
2. На основании идентификатора проекта вам необходимо загрузить задачи с сервера.
3. Добавьте обработчик события удаления проекта. (Прошлая часть задания пункт 2). Проект должен удалиться с БД и перестать отображаться на странице.


**Редактирование задач было опущено для упрощения вашего задания**
